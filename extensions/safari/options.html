<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Atlas UX â€” Settings</title>
  <link rel="stylesheet" href="options.css">
</head>
<body>
  <div class="options-container">

    <!-- Header -->
    <header class="options-header">
      <div class="options-logo">
        <svg width="28" height="28" viewBox="0 0 48 48">
          <circle cx="24" cy="24" r="24" fill="#0f172a" stroke="#06b6d4" stroke-width="1.5"/>
          <path d="M24 9L13 39h5.5l2.2-6h6.6l2.2 6H35L24 9zm0 9.6l3.8 10.4h-7.6L24 18.6z" fill="#06b6d4"/>
        </svg>
        <div>
          <h1>Atlas UX Settings</h1>
          <p class="subtitle">Configure your Safari extension</p>
        </div>
      </div>
    </header>

    <!-- Connection Section -->
    <section class="options-section">
      <h2>Connection</h2>

      <div class="field">
        <label for="optApiUrl">API URL</label>
        <div class="input-row">
          <input type="url" id="optApiUrl" placeholder="https://atlas-ux.onrender.com/v1">
          <button class="btn-outline btn-sm" id="testConnectionBtn">Test</button>
        </div>
        <span class="field-hint">The Atlas UX backend API endpoint.</span>
      </div>

      <div class="field">
        <label for="optAuthToken">Auth Token</label>
        <div class="input-row">
          <input type="password" id="optAuthToken" placeholder="Bearer token or API key">
          <button class="btn-icon" id="toggleTokenBtn" title="Show/hide token">
            <svg id="eyeIcon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/>
            </svg>
            <svg id="eyeOffIcon" class="hidden" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"/><line x1="1" y1="1" x2="23" y2="23"/>
            </svg>
          </button>
        </div>
      </div>

      <div class="field">
        <label for="optTenantId">Tenant ID</label>
        <input type="text" id="optTenantId" placeholder="your-tenant-uuid">
      </div>

      <div id="connectionStatus" class="connection-result hidden"></div>
    </section>

    <!-- Notifications Section -->
    <section class="options-section">
      <h2>Notifications</h2>

      <div class="toggle-row">
        <div class="toggle-info">
          <span class="toggle-label">Job Completions</span>
          <span class="toggle-hint">Get notified when jobs finish.</span>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="notifyJobs" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>

      <div class="toggle-row">
        <div class="toggle-info">
          <span class="toggle-label">Decision Requests</span>
          <span class="toggle-hint">Alert when decisions need approval.</span>
        </div>
        <label class="toggle-switch">
          <input type="checkbox" id="notifyDecisions" checked>
          <span class="toggle-slider"></span>
        </label>
      </div>
    </section>

    <!-- Polling Section -->
    <section class="options-section">
      <h2>Polling</h2>

      <div class="field">
        <label for="pollInterval">Refresh Interval</label>
        <select id="pollInterval">
          <option value="15">Every 15 seconds</option>
          <option value="30">Every 30 seconds</option>
          <option value="60">Every 60 seconds</option>
          <option value="300">Every 5 minutes</option>
        </select>
        <span class="field-hint">How often the popup fetches fresh data.</span>
      </div>
    </section>

    <!-- Data Section -->
    <section class="options-section">
      <h2>Data</h2>

      <div class="danger-zone">
        <div class="danger-info">
          <span class="danger-label">Clear Stored Data</span>
          <span class="danger-hint">Remove all saved credentials, preferences, and cache from this extension.</span>
        </div>
        <button class="btn-danger btn-sm" id="clearDataBtn">Clear All Data</button>
      </div>
    </section>

    <!-- About Section -->
    <section class="options-section">
      <h2>About</h2>
      <div class="about-info">
        <div class="about-row">
          <span class="about-label">Version</span>
          <span class="about-value">1.0.0</span>
        </div>
        <div class="about-row">
          <span class="about-label">Platform</span>
          <span class="about-value">Safari Web Extension (MV3)</span>
        </div>
        <div class="about-row">
          <span class="about-label">Website</span>
          <a href="https://atlasux.vercel.app" class="about-link" target="_blank" rel="noopener">atlasux.vercel.app</a>
        </div>
        <div class="about-row">
          <span class="about-label">API Docs</span>
          <a href="https://atlas-ux.onrender.com/v1/docs" class="about-link" target="_blank" rel="noopener">atlas-ux.onrender.com/v1/docs</a>
        </div>
      </div>
    </section>

    <!-- Save -->
    <div class="save-bar">
      <button class="btn-primary" id="saveBtn">Save Settings</button>
      <span class="save-status hidden" id="saveStatus">Settings saved.</span>
    </div>

  </div>

  <!-- Confirm Modal -->
  <div id="confirmModal" class="confirm-overlay hidden">
    <div class="confirm-box">
      <h3>Clear all data?</h3>
      <p>This will remove your credentials, preferences, and all cached data. You will need to reconnect.</p>
      <div class="confirm-actions">
        <button class="btn-outline btn-sm" id="confirmCancel">Cancel</button>
        <button class="btn-danger btn-sm" id="confirmClear">Clear Everything</button>
      </div>
    </div>
  </div>

  <script src="options.js"></script>
</body>
</html>
