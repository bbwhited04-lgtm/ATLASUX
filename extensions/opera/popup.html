<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=400" />
  <title>Atlas UX</title>
  <link rel="stylesheet" href="popup.css" />
</head>
<body>
  <!-- Toast container -->
  <div id="toast-container"></div>

  <!-- Header -->
  <header id="header">
    <div class="header-left">
      <span class="logo-text">Atlas <span class="logo-accent">UX</span></span>
      <span class="badge-opera">Opera</span>
    </div>
    <div class="header-right">
      <span id="status-dot" class="status-dot red"></span>
      <span id="status-label" class="status-label">Disconnected</span>
    </div>
  </header>

  <!-- Login View -->
  <section id="login-view">
    <div class="login-card">
      <h2 class="login-title">Connect to Atlas UX</h2>
      <p class="login-subtitle">Enter your workspace credentials</p>

      <label class="field-label" for="input-api-url">API URL</label>
      <input
        id="input-api-url"
        type="url"
        placeholder="https://atlas-ux.onrender.com"
        value="https://atlas-ux.onrender.com"
      />

      <label class="field-label" for="input-token">Auth Token</label>
      <input
        id="input-token"
        type="password"
        placeholder="Bearer token"
      />

      <label class="field-label" for="input-tenant">Tenant ID</label>
      <input
        id="input-tenant"
        type="text"
        placeholder="your-tenant-id"
      />

      <button id="btn-connect" class="btn-primary">
        <span id="connect-text">Connect</span>
        <span id="connect-spinner" class="spinner hidden"></span>
      </button>

      <p id="login-error" class="error-text hidden"></p>
    </div>
  </section>

  <!-- Connected View -->
  <section id="connected-view" class="hidden">
    <!-- Stats Row -->
    <div class="stats-row">
      <div class="stat-card">
        <span id="stat-jobs" class="stat-number">--</span>
        <span class="stat-label">Active Jobs</span>
      </div>
      <div class="stat-card">
        <span id="stat-decisions" class="stat-number">--</span>
        <span class="stat-label">Pending Decisions</span>
      </div>
      <div class="stat-card">
        <span id="stat-agents" class="stat-number">--</span>
        <span class="stat-label">Agents Online</span>
      </div>
    </div>

    <!-- Chat Panel -->
    <div class="chat-panel">
      <div class="agent-pills" id="agent-pills">
        <button class="agent-pill active" data-agent="atlas">Atlas</button>
        <button class="agent-pill" data-agent="binky">Binky</button>
        <button class="agent-pill" data-agent="cheryl">Cheryl</button>
        <button class="agent-pill" data-agent="sunday">Sunday</button>
      </div>
      <div class="chat-messages" id="chat-messages">
        <div class="chat-empty">Select an agent and start chatting</div>
      </div>
      <div class="chat-input-row">
        <input
          id="chat-input"
          type="text"
          placeholder="Message Atlas..."
          autocomplete="off"
        />
        <button id="btn-send" class="btn-send" title="Send">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
            <path d="M14.5 1.5L7 9M14.5 1.5L10 14.5L7 9M14.5 1.5L1.5 6L7 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Activity Feed -->
    <div class="activity-section">
      <div class="section-header">
        <span class="section-title">Recent Activity</span>
        <button id="btn-refresh-activity" class="btn-icon" title="Refresh">
          <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
            <path d="M1.5 7C1.5 4 3.96 1.5 7 1.5C9.28 1.5 11.22 2.96 12 5M12.5 7C12.5 10 10.04 12.5 7 12.5C4.72 12.5 2.78 11.04 2 8.5" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
            <path d="M12 1.5V5H8" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
            <path d="M2 12.5V8.5H6" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </button>
      </div>
      <div id="activity-feed" class="activity-feed">
        <div class="activity-empty">Loading activity...</div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <button id="btn-new-job" class="btn-secondary">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <path d="M7 1.5V12.5M1.5 7H12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
        </svg>
        New Job
      </button>
      <button id="btn-dashboard" class="btn-secondary">
        <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
          <rect x="1.5" y="1.5" width="4.5" height="4.5" rx="1" stroke="currentColor" stroke-width="1.2"/>
          <rect x="8" y="1.5" width="4.5" height="4.5" rx="1" stroke="currentColor" stroke-width="1.2"/>
          <rect x="1.5" y="8" width="4.5" height="4.5" rx="1" stroke="currentColor" stroke-width="1.2"/>
          <rect x="8" y="8" width="4.5" height="4.5" rx="1" stroke="currentColor" stroke-width="1.2"/>
        </svg>
        Dashboard
      </button>
    </div>

    <!-- New Job Mini Form (hidden by default) -->
    <div id="new-job-form" class="new-job-form hidden">
      <label class="field-label" for="job-type">Job Type</label>
      <select id="job-type">
        <option value="CONTENT_GENERATION">Content Generation</option>
        <option value="RESEARCH">Research</option>
        <option value="EMAIL_SEND">Email Send</option>
        <option value="SOCIAL_POST">Social Post</option>
        <option value="ANALYSIS">Analysis</option>
      </select>

      <label class="field-label" for="job-description">Description</label>
      <textarea id="job-description" rows="3" placeholder="Describe the job..."></textarea>

      <div class="form-actions">
        <button id="btn-cancel-job" class="btn-ghost">Cancel</button>
        <button id="btn-submit-job" class="btn-primary btn-sm">Create Job</button>
      </div>
    </div>

    <!-- Logout -->
    <div class="logout-row">
      <button id="btn-logout" class="btn-ghost">Disconnect</button>
    </div>
  </section>

  <!-- Footer -->
  <footer id="footer">
    <span class="footer-text">Atlas UX v1.0.0 â€” Opera</span>
    <button id="btn-options" class="btn-icon" title="Settings">
      <svg width="14" height="14" viewBox="0 0 14 14" fill="none">
        <circle cx="7" cy="7" r="2" stroke="currentColor" stroke-width="1.2"/>
        <path d="M7 1V3M7 11V13M1 7H3M11 7H13M2.75 2.75L4.17 4.17M9.83 9.83L11.25 11.25M11.25 2.75L9.83 4.17M4.17 9.83L2.75 11.25" stroke="currentColor" stroke-width="1.2" stroke-linecap="round"/>
      </svg>
    </button>
  </footer>

  <script src="popup.js"></script>
</body>
</html>
