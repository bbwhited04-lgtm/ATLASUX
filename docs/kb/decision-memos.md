# Decision Memos Explained

## What is a Decision Memo?

A Decision Memo is a structured request generated by an AI agent when it encounters an action that exceeds its autonomous authority. Think of it as a virtual employee walking into your office and saying, "Here's what I want to do, here's why, and I need your approval before proceeding."

Decision Memos are a core component of Atlas UX's safety architecture. They ensure that high-impact actions always pass through human judgment before execution.

## When Decision Memos Are Triggered

An agent creates a Decision Memo whenever any of the following conditions are met:

### Financial Triggers
- **Spend above limit**: Any proposed expenditure exceeding `AUTO_SPEND_LIMIT_USD` (configurable per organization)
- **Recurring charges**: All recurring financial commitments are blocked by default during Alpha — every subscription or recurring payment generates a memo
- **Unusual amounts**: Transactions significantly above the agent's historical spending pattern

### Risk-Based Triggers
- **Risk tier 2+**: Any action classified at risk tier 2 (Moderate) or above requires approval
- **Low confidence**: Agent confidence score below `CONFIDENCE_AUTO_THRESHOLD`
- **Novel situations**: Actions the agent hasn't performed before or that fall outside its training patterns

### Policy Triggers
- **External communications**: First contact with new vendors, customers, or partners
- **Data modifications**: Bulk updates, deletions, or exports of sensitive data
- **Configuration changes**: Modifications to system settings, integrations, or agent parameters
- **Cross-agent actions**: Tasks requiring coordination between multiple agents

## Anatomy of a Decision Memo

Every Decision Memo contains:

```
Decision Memo
─────────────────────────────────
Agent:        [Name and role]
Action:       [What the agent wants to do]
Rationale:    [Why the agent believes this action is appropriate]
Risk Tier:    [0-4 classification]
Confidence:   [0.0-1.0 score]
Impact:       [Expected outcome and affected parties]
Cost:         [Financial impact, if any]
Reversible:   [Yes/No — can this action be undone?]
Alternatives: [Other approaches considered]
Deadline:     [When the decision is needed by]
─────────────────────────────────
```

## Risk Tier Breakdown

| Tier | Classification | Examples | Review Level |
|---|---|---|---|
| 0 | Minimal | Logging, internal reads | Auto-approved |
| 1 | Low | Routine emails, standard posts | Auto-approved (high confidence) |
| 2 | Moderate | External vendor contact, moderate spend | Single reviewer |
| 3 | High | Large purchases, public statements, contracts | Senior reviewer |
| 4 | Critical | Legal commitments, irreversible deletions, large financial exposure | Multi-party approval |

## Spend Limits

The `AUTO_SPEND_LIMIT_USD` environment variable sets the threshold below which agents can spend autonomously:

- **Below limit**: Agent can execute if confidence is high and risk tier is low
- **At or above limit**: Decision Memo is mandatory — no exceptions
- **Recurring charges**: Always require approval regardless of amount (Alpha constraint)

During the Alpha period, spend limits are intentionally conservative. Organizations can adjust these limits as they build confidence in their agent configurations.

## Approval Workflow

### Step 1: Memo Generation
The agent creates the Decision Memo and adds it to the pending approvals queue. The associated job is paused.

### Step 2: Notification
Human operators are notified via their configured channels (dashboard, Telegram, email) that an approval is pending.

### Step 3: Review
The reviewer examines the memo details, including rationale, risk assessment, and alternatives. They can:
- **Approve** — The agent proceeds with the proposed action
- **Deny** — The action is cancelled and the agent is notified
- **Modify** — The reviewer adjusts parameters and approves the modified action
- **Request info** — Ask the agent for additional context before deciding

### Step 4: Execution or Cancellation
Based on the reviewer's decision, the job either resumes execution or is marked as cancelled. Either outcome is recorded in the audit log.

## Viewing Decision Memos

Decision Memos are accessible through:
- **Business Manager** — Quick navigation to pending decisions from the business card view
- **Agent Watcher** — Live activity monitor shows memo creation and resolution in real time
- **API** — Programmatic access via the `/v1/decisions` endpoints

## Recurring Charge Blocks

A special category of Decision Memo applies to recurring financial commitments. During Alpha, all recurring charges are blocked by default. This means:

- Subscription sign-ups always generate a Decision Memo
- Recurring payment authorizations require explicit approval
- The memo clearly labels the commitment as recurring and shows projected total cost

This is a deliberate safety measure. Recurring charges represent open-ended financial exposure, and Atlas UX errs on the side of caution.

## Key Takeaways

1. Decision Memos are automatic — agents generate them whenever they hit a boundary.
2. The system favors safety over speed — when in doubt, it asks.
3. Every memo is auditable and stored permanently.
4. Reviewers have full context to make informed decisions quickly.
5. The workflow is designed to be lightweight — most memos can be resolved in seconds.
